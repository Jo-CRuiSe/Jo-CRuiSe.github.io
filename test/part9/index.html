---
layout: compress
---

<!doctype html>

{% include origin-type.html %}

{% include lang.html %}

{% if site.theme_mode %}
{% capture prefer_mode %}data-mode="{{ site.theme_mode }}"{% endcapture %}
{% endif %}
<!-- `site.alt_lang` can specify a language different from the UI -->
<html lang="{{ site.alt_lang | default: site.lang }}" {{ prefer_mode }}>
{% include head.html %}



<body>
    <h1>Hello!</h1>
    <div id="main-wrapper" class="d-flex justify-content-center">

        <div class="container d-flex flex-column px-xxl-5">

            <header id="topbar-wrapper" aria-label="Top Bar">
                <div id="topbar" class="d-flex align-items-center justify-content-between px-lg-3 h-100">
                    <button type="button" id="sidebar-trigger" class="btn btn-link">
                        <i class="fas fa-bars fa-fw"></i>
                    </button>
                </div>
            </header>

            {% assign pinned = site.posts | where: 'pin', 'true' %}
    {% assign default = site.posts | where_exp: 'item', 'item.pin != true and item.hidden != true' %}

    {% assign posts = '' | split: '' %}

    <!-- Get pinned posts -->

    {% assign offset = paginator.page | minus: 1 | times: paginator.per_page %}
    {% assign pinned_num = pinned.size | minus: offset %}

    {% if pinned_num > 0 %}
    {% for i in (offset..pinned.size) limit: pinned_num %}
    {% assign posts = posts | push: pinned[i] %}
    {% endfor %}
    {% else %}
    {% assign pinned_num = 0 %}
    {% endif %}

    <!-- Get default posts -->

    {% assign default_beg = offset | minus: pinned.size %}

    {% if default_beg < 0 %} {% assign default_beg=0 %} {% endif %} {% assign default_num=paginator.posts | size |
        minus: pinned_num %} {% assign default_end=default_beg | plus: default_num | minus: 1 %} {% if default_num> 0 %}
        {% for i in (default_beg..default_end) %}
        {% assign posts = posts | push: default[i] %}
        {% endfor %}
        {% endif %}

        <div id="post-list" class="flex-grow-1 px-xl-1">
            {% for post in posts %}
            <article class="card-wrapper card">
                <a href="{{ post.url | relative_url }}" class="post-preview row g-0 flex-md-row-reverse">
                    {% assign card_body_col = '12' %}

                    {% if post.image %}
                    {% assign src = post.image.path | default: post.image %}
                    {% unless src contains '//' %}
                    {% assign src = post.img_path | append: '/' | append: src | replace: '//', '/' %}
                    {% endunless %}

                    {% assign alt = post.image.alt | xml_escape | default: 'Preview Image' %}

                    {% assign lqip = null %}

                    {% if post.image.lqip %}
                    {% capture lqip %}lqip="{{ post.image.lqip }}"{% endcapture %}
                    {% endif %}

                    <div class="col-md-5">
                        <img src="{{ src }}" alt="{{ alt }}" {{ lqip }}>
                    </div>

                    {% assign card_body_col = '7' %}
                    {% endif %}

                    <div class="col-md-{{ card_body_col }}">
                        <div class="card-body d-flex flex-column">
                            <h1 class="card-title my-2 mt-md-0">{{ post.title }}</h1>

                            <div class="card-text content mt-0 mb-3">
                                <p>
                                    {% include no-linenos.html content=post.content %}
                                    {{ content | markdownify | strip_html | truncate: 200 | escape }}
                                </p>
                            </div>

                            <div class="post-meta flex-grow-1 d-flex align-items-end">
                                <div class="me-auto">
                                    <!-- posted date -->
                                    <i class="far fa-calendar fa-fw me-1"></i>
                                    {% include datetime.html date=post.date lang=lang %}

                                    <!-- categories -->
                                    {% if post.categories.size > 0 %}
                                    <i class="far fa-folder-open fa-fw me-1"></i>
                                    <span class="categories">
                                        {% for category in post.categories %}
                                        {{ category }}
                                        {%- unless forloop.last -%},{%- endunless -%}
                                        {% endfor %}
                                    </span>
                                    {% endif %}
                                </div>

                                {% if post.pin %}
                                <div class="pin ms-1">
                                    <i class="fas fa-thumbtack fa-fw"></i>
                                    <span>{{ site.data.locales[lang].post.pin_prompt }}</span>
                                </div>
                                {% endif %}
                            </div>
                            <!-- .post-meta -->
                        </div>
                        <!-- .card-body -->
                    </div>
                </a>
            </article>
            {% endfor %}
        </div>
        <!-- #post-list -->

        {% if paginator.total_pages > 1 %}
        {% include post-paginator.html %}
        {% endif %}

        </div>
    </div>
    

        <script src="https://cdn.jsdelivr.net/npm/leancloud-storage/dist/av-min.js"></script>
        <script type="text/javascript">
            let appId = 'rzV27a2iZkM3qCAIMnz2u6pO-9Nh9j0Va';
            let appKey = '6sPXQuSvQBiMk60c7sFhRPVz';
            AV.init({
                appId: appId,
                appKey: appKey,
                serverURL: 'https://rzv27a2i.lc-cn-n1-shared.com',
            });

            const currentUser = AV.User.current();
            console.log(currentUser);
            function checkLogin() {
                if (currentUser) {
                    /* 跳到首页 */
                    document.body.style.display = 'block';
                } else {
                    /* 显示注册或登录页面 */
                    window.location.href = 'https://jo-cruise.github.io/test/part8';
                }
            }

            /* 在页面加载时调用checkLogin函数检查登录状态 */
            window.addEventListener('load', checkLogin);
        </script>
</body>